<!DOCTYPE html>
<html>
<head>
    <title>Auth Debug Test</title>
</head>
<body>
    <h1>Authentication Debug Test</h1>
    <div id="results"></div>
    
    <script>
    // Copy the exact hash function from auth.js
    function hashPassword(password) {
        let hash = 0;
        for (let i = 0; i < password.length; i++) {
            const char = password.charCodeAt(i);
            hash = ((hash << 5) - hash) + char;
            hash = hash & hash; // Convert to 32-bit integer
        }
        return hash.toString();
    }
    
    // Test the credentials
    const credentials = {
        'employee': { 
            password: hashPassword('fsw2025!'),
            role: 'employee',
            name: 'New Employee'
        },
        'hr': { 
            password: hashPassword('hr2025!'), 
            role: 'hr',
            name: 'HR Administrator'
        }
    };
    
    // Test login function
    function testLogin(username, password) {
        const user = credentials[username];
        const hashedPassword = hashPassword(password);
        
        console.log('Testing:', username, password);
        console.log('Stored hash:', user ? user.password : 'USER NOT FOUND');
        console.log('Input hash:', hashedPassword);
        console.log('Match:', user && user.password === hashedPassword);
        
        return user && user.password === hashedPassword;
    }
    
    // Run tests
    const results = document.getElementById('results');
    
    // Test employee login
    const employeeTest = testLogin('employee', 'fsw2025!');
    results.innerHTML += `<p>Employee login test: ${employeeTest ? 'PASS' : 'FAIL'}</p>`;
    
    // Test hr login
    const hrTest = testLogin('hr', 'hr2025!');
    results.innerHTML += `<p>HR login test: ${hrTest ? 'PASS' : 'FAIL'}</p>`;
    
    // Test wrong password
    const wrongTest = testLogin('employee', 'wrong');
    results.innerHTML += `<p>Wrong password test: ${wrongTest ? 'FAIL (should be false)' : 'PASS'}</p>`;
    
    // Show hash values for debugging
    results.innerHTML += `<h2>Debug Info:</h2>`;
    results.innerHTML += `<p>fsw2025! hash: ${hashPassword('fsw2025!')}</p>`;
    results.innerHTML += `<p>hr2025! hash: ${hashPassword('hr2025!')}</p>`;
    results.innerHTML += `<p>Stored employee hash: ${credentials.employee.password}</p>`;
    results.innerHTML += `<p>Stored hr hash: ${credentials.hr.password}</p>`;
    
    console.log('All credentials:', credentials);
    </script>
</body>
</html>